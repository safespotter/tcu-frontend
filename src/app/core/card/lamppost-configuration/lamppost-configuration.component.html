<button mat-icon-button class="close-button" [mat-dialog-close]="true">
  <mat-icon class="close-icon" color="#333333">close</mat-icon>
</button>
<h2 mat-dialog-title>Configurazione lampione {{data.info}}</h2>
<div class="mat-elevation-z8">
  <form [formGroup]="timerForm" (ngSubmit)="onSubmit()">
    <table mat-table [dataSource]="dataSource">
      <ng-container matColumnDef="Anomalia">
        <th mat-header-cell *matHeaderCellDef>
          <p class="header-title" style="text-align: left;">Anomalia</p>
        </th>
        <td mat-cell *matCellDef="let element" style="text-align: left"> {{element.name}}</td>
      </ng-container>

      <ng-container matColumnDef="Allerta verde">
        <th mat-header-cell *matHeaderCellDef class="column-green">
          <p class="header-title"> Allerta verde</p>
          <p class="header-description">Notifica sulla dashboard</p>
        </th>
        <td mat-cell *matCellDef="let element" class="column-green">
          <div *ngIf="element.id == 0" class="div1">
            <div class="div2"> Durata:</div>
            <textarea class="textarea1" rows="1" cols="2" type="text" formControlName="timer_green"> </textarea>
            <div class="div3"> min</div>
          </div>
          <mat-slide-toggle *ngIf="element.id != 0" color="green" (change)="onToggle($event, data.id, element, 'green')"
                            [checked]="element.c_green" [disabled]="element.d_green">
          </mat-slide-toggle>
        </td>
      </ng-container>

      <ng-container matColumnDef="Allerta gialla">
        <th mat-header-cell *matHeaderCellDef class="column-yellow">
          <p class="header-title"> Allerta gialla</p>
          <p class="header-description">Notifica sulla dashboard e sul dispositivo</p>
        </th>
        <td mat-cell *matCellDef="let element" class="column-yellow">
          <div *ngIf="element.id == 0" class="div1">
            <div class="div2"> Durata:</div>
            <textarea class="textarea1" rows="1" cols="2" type="text" formControlName="timer_yellow">  </textarea>
            <div class="div3"> min</div>
          </div>
          <mat-slide-toggle *ngIf="element.id != 0" color="yellow"
                            (change)="onToggle($event, data.id, element, 'yellow')" [checked]="element.c_yellow"
                            [disabled]="element.d_yellow">
          </mat-slide-toggle>
        </td>
      </ng-container>

      <ng-container matColumnDef="Allerta arancione">
        <th mat-header-cell *matHeaderCellDef class="column-orange">
          <p class="header-title"> Allerta arancione</p>
          <p class="header-description">Notifica sulla dashboard e dispositivo, azione richiesta</p>
        </th>
        <td mat-cell *matCellDef="let element" class="column-orange">
          <div *ngIf="element.id == 0" class="div1">
            <div class="div2"> Durata:</div>
            <textarea class="textarea1" rows="1" cols="2" type="text" formControlName="timer_orange"> 15 </textarea>
            <div class="div3"> min</div>
          </div>
          <mat-slide-toggle *ngIf="element.id != 0" color="orange"
                            (change)="onToggle($event, data.id, element, 'orange')" [checked]="element.c_orange"
                            [disabled]="element.d_orange">
          </mat-slide-toggle>
        </td>
      </ng-container>

      <ng-container matColumnDef="Allerta rossa">
        <th mat-header-cell *matHeaderCellDef class="column-red">
          <p class="header-title"> Allerta rossa</p>
          <p class="header-description">Notifica sulla dashboard, dispositivo e Tetralert; azione richiesta; attivazione
            pannello luminoso</p>
        </th>
        <td mat-cell *matCellDef="let element" class="column-red">
          <div *ngIf="element.id == 0" class="div1">
            <div class="div2"> Durata:</div>
            <textarea class="textarea1" rows="1" cols="2" type="text" formControlName="timer_red"> 15 </textarea>
            <div class="div3"> min</div>
          </div>
          <mat-slide-toggle *ngIf="element.id != 0" color="red" (change)="onToggle($event, data.id, element, 'red')"
                            [checked]="element.c_red" [disabled]="element.d_red">
          </mat-slide-toggle>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </form>
</div>
<button mat-raised-button class="save-button" (click)="onSubmit()">Salva</button>

